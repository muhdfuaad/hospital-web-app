{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/HOSPITALAPP/hospitalapp/src/lib/axios.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API = axios.create({\r\n  baseURL: \"https://localhost:7112\", // update to your .NET API URL\r\n});\r\n\r\n// // ✅ Automatically attach JWT token\r\n// API.interceptors.request.use((config) => {\r\n//   const token = localStorage.getItem(\"token\");\r\n\r\n//   if (token) {\r\n//     config.headers.Authorization = `Bearer ${token}`;\r\n//   }\r\n\r\n//   return config;\r\n// });\r\n\r\nexport default API;\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;AACX;uCAae","debugId":null}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/HOSPITALAPP/hospitalapp/src/app/%28dashboard%29/Panchayaths/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { FilePen, Trash2 } from 'lucide-react';\r\nimport API from '@/lib/axios';\r\n\r\ninterface District {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface Panchayath {\r\n  panchayathId: number;\r\n  panchayathName: string;\r\n  dstName: string;\r\n  dstId: number;\r\n}\r\n\r\nexport default function PanchayathsPage() {\r\n  const [districts, setDistricts] = useState<District[]>([]);\r\n  const [panchayaths, setPanchayaths] = useState<Panchayath[]>([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [panchayathName, setPanchayathName] = useState('');\r\n  const [selectedDistrictId, setSelectedDistrictId] = useState<number | ''>('');\r\n  const [editingId, setEditingId] = useState<number | null>(null);\r\n  const [error, setError] = useState('');\r\n\r\n  // ✅ Fetch both districts and panchayaths\r\n  const fetchData = async () => {\r\n    try {\r\n      const districtRes = await API.get<District[]>('/api/Districts');\r\n      setDistricts(districtRes.data);\r\n\r\n      const panchayathRes = await API.get<Panchayath[]>('/api/Panchayaths');\r\n      setPanchayaths(panchayathRes.data);\r\n    } catch (err) {\r\n      console.error('Failed fetching data:', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  // ✅ Delete Panchayath\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm('Are you sure to delete this panchayath?')) return;\r\n    try {\r\n      await API.delete(`/api/Panchayaths/${id}`);\r\n      await fetchData();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Failed deleting panchayath, see console.');\r\n    }\r\n  };\r\n\r\n  // ✅ Save/Add/Edit Panchayath\r\n  const handleSave = async () => {\r\n    setError('');\r\n\r\n    if (!panchayathName.trim()) {\r\n      setError('Enter Panchayath name');\r\n      return;\r\n    }\r\n\r\n    if (!selectedDistrictId) {\r\n      setError('Select a district');\r\n      return;\r\n    }\r\n\r\n    const normalized = panchayathName.trim().toLowerCase();\r\n    const duplicate = panchayaths.some(\r\n      (p) =>\r\n        p.panchayathName.trim().toLowerCase() === normalized &&\r\n        p.panchayathId !== editingId\r\n    );\r\n\r\n    if (duplicate) {\r\n      setError('Panchayath name already exists');\r\n      return;\r\n    }\r\n\r\n    const method = editingId ? 'put' : 'post';\r\n    const url = editingId\r\n      ? `/api/Panchayaths/${editingId}`\r\n      : '/api/Panchayaths';\r\n\r\n    const bodyData = {\r\n      id: editingId || 0,\r\n      name: panchayathName.trim(),\r\n      dstId: selectedDistrictId,\r\n      status: 1,\r\n    };\r\n\r\n    try {\r\n      await API[method](url, bodyData);\r\n\r\n      setPanchayathName('');\r\n      setSelectedDistrictId('');\r\n      setEditingId(null);\r\n      setShowModal(false);\r\n      setError('');\r\n      await fetchData();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError('Failed saving panchayath, check console');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h2 className=\"text-xl font-bold text-blue-900 mb-4 uppercase tracking-wide text-center\">Panchayaths</h2>\r\n\r\n      <div className=\"flex justify-center mb-4\">\r\n        <button\r\n          onClick={() => {\r\n            setShowModal(true);\r\n            setEditingId(null);\r\n            setPanchayathName('');\r\n            setSelectedDistrictId('');\r\n            setError('');\r\n          }}\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition\"\r\n        >\r\n          ➕ Add Panchayath\r\n        </button>\r\n      </div>\r\n\r\n<div className=\"overflow-x-auto\">\r\n  <table className=\"table-auto border border-collapse border-gray-300 text-xs max-w-[400px] mx-auto\">\r\n    <thead className=\"bg-gray-200\">\r\n\r\n            <tr>\r\n              <th className=\"px-2 py-1 text-left border border-gray-300\">ID</th>\r\n              <th className=\"px-2 py-1 text-left border border-gray-300\">Name</th>\r\n              <th className=\"px-2 py-1 text-left border border-gray-300\">District</th>\r\n              <th className=\"px-2 py-1 text-left border border-gray-300\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {panchayaths.length > 0 ? (\r\n              panchayaths.map((p) => (\r\n                <tr key={p.panchayathId} className=\"border-t border-gray-300\">\r\n                  <td className=\"px-4 py-2 text-left border border-gray-300\">{p.panchayathId}</td>\r\n                  <td className=\"px-4 py-2 text-left border border-gray-300\">{p.panchayathName}</td>\r\n                  <td className=\"px-4 py-2 text-left border border-gray-300\">{p.dstName}</td>\r\n                  <td className=\"px-4 py-2 text-left border border-gray-300\">\r\n                    <div className=\"flex gap-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setEditingId(p.panchayathId);\r\n                          setPanchayathName(p.panchayathName);\r\n                          setSelectedDistrictId(p.dstId);\r\n                          setShowModal(true);\r\n                          setError('');\r\n                        }}\r\n                        className=\"text-blue-600 hover:text-blue-800 p-2 rounded hover:bg-blue-100 transition-all\"\r\n                        title='Edit Panchayath'\r\n                      >\r\n                        <FilePen className=\"w-4 h-3\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDelete(p.panchayathId)}\r\n                        className=\"text-red-600 hover:text-red-800 p-2 rounded hover:bg-red-100 transition-all\"\r\n                        title='Delete Panchayath'\r\n                      >\r\n                        <Trash2 className=\"w-4 h-3\" />\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={4} className=\"px-4 py-2 text-center text-gray-500\">\r\n                  No panchayaths found\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black/30 flex justify-center items-center z-50\">\r\n          <div className=\"bg-white p-6 rounded-lg w-full max-w-sm shadow-lg\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">{editingId ? '✏️ Edit' : '➕ Add'} Panchayath</h3>\r\n            <input\r\n              value={panchayathName}\r\n              onChange={(e) => setPanchayathName(e.target.value)}\r\n              className=\"w-full border px-3 py-2 mb-2 rounded\"\r\n              placeholder=\"Panchayath Name\"\r\n            />\r\n            <select\r\n              value={selectedDistrictId}\r\n              onChange={(e) => setSelectedDistrictId(Number(e.target.value))}\r\n              className=\"w-full border px-3 py-2 mb-2 rounded\"\r\n            >\r\n              <option value=\"\">Select District</option>\r\n              {districts.map((d) => (\r\n                <option key={d.id} value={d.id}>{d.name}</option>\r\n              ))}\r\n            </select>\r\n            {error && <p className=\"text-red-600 text-sm mb-2\">{error}</p>}\r\n            <div className=\"flex justify-end gap-2 mt-2\">\r\n              <button onClick={() => setShowModal(false)} className=\"border px-4 py-2 rounded\">Cancel</button>\r\n              <button onClick={handleSave} className=\"bg-blue-600 text-white px-4 py-2 rounded\">Save</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}